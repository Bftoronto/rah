# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è Telegram Mini App

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
Telegram Mini App –Ω–µ —Ä–∞–±–æ—Ç–∞–ª –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ URL'–æ–≤ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫.

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ URL —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
**–ü—Ä–æ–±–ª–µ–º–∞**: –ö–Ω–æ–ø–∫–∞ –º–µ–Ω—é Telegram –±–æ—Ç–∞ —É–∫–∞–∑—ã–≤–∞–ª–∞ –Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL.
**–†–µ—à–µ–Ω–∏–µ**: 
- –û–±–Ω–æ–≤–ª–µ–Ω URL –Ω–∞ `https://frabjous-florentine-c506b0.netlify.app`
- –ó–∞–ø—É—â–µ–Ω —Å–∫—Ä–∏–ø—Ç `check_telegram_bot.py` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CORS
**–ü—Ä–æ–±–ª–µ–º–∞**: Backend –Ω–µ —Ä–∞–∑—Ä–µ—à–∞–ª –∑–∞–ø—Ä–æ—Å—ã —Å Netlify –¥–æ–º–µ–Ω–∞.
**–†–µ—à–µ–Ω–∏–µ**: 
- –î–æ–±–∞–≤–ª–µ–Ω –¥–æ–º–µ–Ω `https://frabjous-florentine-c506b0.netlify.app` –≤ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –û–±–Ω–æ–≤–ª–µ–Ω —Ñ–∞–π–ª `backend/app/main.py`

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ API
**–ü—Ä–æ–±–ª–µ–º–∞**: Frontend –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–ª Netlify –¥–æ–º–µ–Ω –∫–∞–∫ production –æ–∫—Ä—É–∂–µ–Ω–∏–µ.
**–†–µ—à–µ–Ω–∏–µ**: 
- –û–±–Ω–æ–≤–ª–µ–Ω —Ñ–∞–π–ª `assets/js/api.js` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ Netlify –¥–æ–º–µ–Ω–∞
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `frabjous-florentine-c506b0.netlify.app` –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 4. –£–ª—É—á—à–µ–Ω–∏–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ Telegram
**–ü—Ä–æ–±–ª–µ–º–∞**: –°—Ç—Ä–æ–≥–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è Telegram –¥–∞–Ω–Ω—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∞ —Ä–∞–±–æ—Ç—É –≤ —Ä–µ–∂–∏–º–µ –æ—Ç–ª–∞–¥–∫–∏.
**–†–µ—à–µ–Ω–∏–µ**: 
- –î–æ–±–∞–≤–ª–µ–Ω fallback —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –≤ `backend/app/utils/security.py`
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –í–∫–ª—é—á–µ–Ω DEBUG —Ä–µ–∂–∏–º –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ —Å—Ç—Ä–æ–≥–æ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏

### 5. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö Telegram
**–ü—Ä–æ–±–ª–µ–º–∞**: Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–ª –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏.
**–†–µ—à–µ–Ω–∏–µ**: 
- –û–±–Ω–æ–≤–ª–µ–Ω —Ñ–∞–π–ª `assets/js/app.js` –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —Ç–æ–ª—å–∫–æ user-–æ–±—ä–µ–∫—Ç–∞
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –°—Ç–∞—Ç—É—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ **–§—Ä–æ–Ω—Ç–µ–Ω–¥** (Netlify): https://frabjous-florentine-c506b0.netlify.app - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **–ë—ç–∫–µ–Ω–¥** (Render): https://pax-backend-2gng.onrender.com - —Ä–∞–±–æ—Ç–∞–µ—Ç  
- ‚úÖ **Telegram –±–æ—Ç**: @paxdemobot - –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ **CORS**: –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –≤—Å–µ—Ö –¥–æ–º–µ–Ω–æ–≤
- ‚úÖ **–ö–Ω–æ–ø–∫–∞ –º–µ–Ω—é**: —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL

### –¢–µ—Å—Ç—ã API
- ‚úÖ –ö–æ—Ä–Ω–µ–≤–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç: 200 OK
- ‚úÖ Health check: healthy
- ‚úÖ API info: –¥–æ—Å—Ç—É–ø–µ–Ω
- ‚úÖ Telegram verification: –æ—Ç–≤–µ—á–∞–µ—Ç (—Å—Ç–∞—Ç—É—Å 500 –æ–∂–∏–¥–∞–µ–º –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö)

## üõ†Ô∏è –°–æ–∑–¥–∞–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### 1. –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–æ—Ç–∞ (`check_telegram_bot.py`)
```bash
python3 check_telegram_bot.py
```
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å Telegram –±–æ—Ç–∞
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ webhook –∏ –∫–Ω–æ–ø–∫–µ –º–µ–Ω—é
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å URL –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é

### 2. –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (`check_app_status.py`)
```bash
python3 check_app_status.py
```
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∏ –±—ç–∫–µ–Ω–¥–∞
- –¢–µ—Å—Ç–∏—Ä—É–µ—Ç health check –∏ API endpoints
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ Telegram

### 3. –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (`test_telegram_miniapp.html`)
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Telegram Mini App
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ Telegram Web App
- –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±—ç–∫–µ–Ω–¥—É –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (`TELEGRAM_MINIAPP_TESTING.md`)
- –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- –û–ø–∏—Å–∞–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º –∏ —Ä–µ—à–µ–Ω–∏–π
- –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### Backend (`backend/app/main.py`)
```python
allow_origins=[
    "https://web.telegram.org",
    "https://t.me",
    "https://frabjous-florentine-c506b0.netlify.app",  # –î–æ–±–∞–≤–ª–µ–Ω
    # ... –¥—Ä—É–≥–∏–µ –¥–æ–º–µ–Ω—ã
]
```

### Frontend (`assets/js/api.js`)
```javascript
} else if (window.location.hostname === 'frabjous-florentine-c506b0.netlify.app' || 
           window.location.hostname === 'frabjous-florentine-c506b0.netlify.app') {
    return 'production';
}
```

### Security (`backend/app/utils/security.py`)
```python
bot_token = os.getenv('TELEGRAM_BOT_TOKEN', '8187393599:AAEudOluahmhNJixt_hW8mvWjWC0eh1YIlA')
```

## üì± –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Telegram**
2. **–ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞** @paxdemobot
3. **–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É** "–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é** - –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ–π—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏** - –ø–æ–∏—Å–∫, –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø—Ä–æ—Ñ–∏–ª—å

## üö® –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: "Telegram Web App –Ω–µ –Ω–∞–π–¥–µ–Ω"
**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç–µ —á–µ—Ä–µ–∑ Telegram, –∞ –Ω–µ –±—Ä–∞—É–∑–µ—Ä.

### –ü—Ä–æ–±–ª–µ–º–∞: CORS –æ—à–∏–±–∫–∏
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞. –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏ - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
**–†–µ—à–µ–Ω–∏–µ**: 
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±—ç–∫–µ–Ω–¥–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö Telegram

## üìà –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫
3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –£–±—Ä–∞—Ç—å DEBUG —Ä–µ–∂–∏–º –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –î–æ–±–∞–≤–∏—Ç—å Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
5. **–¢–µ—Å—Ç—ã**: –°–æ–∑–¥–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã

## üéØ –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ Telegram Web App
- [ ] –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- [ ] –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
- [ ] –ù–µ—Ç CORS –æ—à–∏–±–æ–∫
- [ ] –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è Telegram —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `python3 check_app_status.py`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±—ç–∫–µ–Ω–¥–∞
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `test_telegram_miniapp.html` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ 