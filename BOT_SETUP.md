# ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–∞ –¥–ª—è PAX Platform

## üìã –û–±–∑–æ—Ä

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram –±–æ—Ç–∞ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å PAX Platform –¥–ª—è –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –ø–æ–∏—Å–∫–∞ –ø–æ–ø—É—Ç—á–∏–∫–æ–≤.

## üéØ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **Telegram –∞–∫–∫–∞—É–Ω—Ç** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞
- **–î–æ–º–µ–Ω** —Å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è Web Apps)
- **PAX Platform** —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–∞—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- **–î–æ—Å—Ç—É–ø –∫ @BotFather** –≤ Telegram

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **HTTPS –ø—Ä–æ—Ç–æ–∫–æ–ª** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è Telegram Web Apps)
- **–í–∞–ª–∏–¥–Ω—ã–π SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç** (Let's Encrypt –∏–ª–∏ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π)
- **CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –¥–ª—è web.telegram.org
- **Webhook –ø–æ–¥–¥–µ—Ä–∂–∫–∞** –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## üîß –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather

#### 1.1 –ù–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
```bash
# –í Telegram –Ω–∞–π–¥–∏—Ç–µ @BotFather –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ:
/newbot
```

#### 1.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞
```
# –ù–∞–∑–≤–∞–Ω–∏–µ –±–æ—Ç–∞ (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º):
PAX - –ü–æ–∏—Å–∫ –ø–æ–ø—É—Ç—á–∏–∫–æ–≤

# Username –±–æ—Ç–∞ (–¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ 'bot'):
pax_rides_bot
```

#### 1.3 –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
```
# BotFather –≤–µ—Ä–Ω–µ—Ç —Ç–æ–∫–µ–Ω –≤–∏–¥–∞:
1234567890:ABCdefGHIjklMNOpqrsTUVwxyz

# –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç–æ—Ç —Ç–æ–∫–µ–Ω - –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Web App

#### 2.1 –°–æ–∑–¥–∞–Ω–∏–µ Web App
```bash
# –í @BotFather –æ—Ç–ø—Ä–∞–≤—å—Ç–µ:
/newapp
```

#### 2.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Web App
```
# –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
PAX Platform

# –ö–æ—Ä–æ—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:
–°–µ—Ä–≤–∏—Å –ø–æ–∏—Å–∫–∞ –ø–æ–ø—É—Ç—á–∏–∫–æ–≤

# –û–ø–∏—Å–∞–Ω–∏–µ:
–ù–∞–π–¥–∏—Ç–µ –ø–æ–ø—É—Ç—á–∏–∫–æ–≤ –¥–ª—è –ø–æ–µ–∑–¥–∫–∏ –º–µ–∂–¥—É –≥–æ—Ä–æ–¥–∞–º–∏ –†–æ—Å—Å–∏–∏. 
–ë—Ä–æ–Ω–∏—Ä—É–π—Ç–µ –ø–æ–µ–∑–¥–∫–∏, –Ω–∞—Ö–æ–¥–∏—Ç–µ –≤–æ–¥–∏—Ç–µ–ª–µ–π –∏ —ç–∫–æ–Ω–æ–º—å—Ç–µ –Ω–∞ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è—Ö.

# URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
https://your-domain.com

# –ö–∞—Ç–µ–≥–æ—Ä–∏—è:
Travel
```

#### 2.3 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é
```bash
# –í @BotFather –æ—Ç–ø—Ä–∞–≤—å—Ç–µ:
/setmenubutton
```

```
# –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
# –í–≤–µ–¥–∏—Ç–µ URL:
https://your-domain.com
```

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞

#### 3.1 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–º–∞–Ω–¥
```bash
# –í @BotFather –æ—Ç–ø—Ä–∞–≤—å—Ç–µ:
/setcommands
```

#### 3.2 –°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥
```
start - –ù–∞—á–∞—Ç—å –ø–æ–∏—Å–∫ –ø–æ–ø—É—Ç—á–∏–∫–æ–≤
search - –ü–æ–∏—Å–∫ –ø–æ–µ–∑–¥–æ–∫
mytrips - –ú–æ–∏ –ø–æ–µ–∑–¥–∫–∏
profile - –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å
help - –ü–æ–º–æ—â—å
settings - –ù–∞—Å—Ç—Ä–æ–π–∫–∏
support - –ü–æ–¥–¥–µ—Ä–∂–∫–∞
```

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–ø–∏—Å–∞–Ω–∏—è –±–æ—Ç–∞

#### 4.1 –û–ø–∏—Å–∞–Ω–∏–µ –±–æ—Ç–∞
```bash
# –í @BotFather –æ—Ç–ø—Ä–∞–≤—å—Ç–µ:
/setdescription
```

```
# –û–ø–∏—Å–∞–Ω–∏–µ:
PAX - —É–¥–æ–±–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ–ø—É—Ç—á–∏–∫–æ–≤. 
–ë—Ä–æ–Ω–∏—Ä—É–π—Ç–µ –ø–æ–µ–∑–¥–∫–∏, –Ω–∞—Ö–æ–¥–∏—Ç–µ –≤–æ–¥–∏—Ç–µ–ª–µ–π –∏ —ç–∫–æ–Ω–æ–º—å—Ç–µ –Ω–∞ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è—Ö.
```

#### 4.2 –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ
```bash
# –í @BotFather –æ—Ç–ø—Ä–∞–≤—å—Ç–µ:
/setabouttext
```

```
# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ:
PAX Platform - —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ–ø—É—Ç—á–∏–∫–æ–≤ –≤ –†–æ—Å—Å–∏–∏.

–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
‚Ä¢ –ü–æ–∏—Å–∫ –ø–æ–µ–∑–¥–æ–∫ –ø–æ –º–∞—Ä—à—Ä—É—Ç—É –∏ –¥–∞—Ç–µ
‚Ä¢ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Å—Ç —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
‚Ä¢ –°–∏—Å—Ç–µ–º–∞ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ –∏ –æ—Ç–∑—ã–≤–æ–≤
‚Ä¢ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —á–∞—Ç —Å –≤–æ–¥–∏—Ç–µ–ª–µ–º
‚Ä¢ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø—Ä—è–º—ã–µ —Ä–∞—Å—á–µ—Ç—ã

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã:
‚Ä¢ –ù–∞–ª–∏—á–Ω—ã–π —Ä–∞—Å—á–µ—Ç
‚Ä¢ –ü–µ—Ä–µ–≤–æ–¥ –Ω–∞ –∫–∞—Ä—Ç—É —á–µ—Ä–µ–∑ –°–ë–ü

–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã!
```

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞

#### 5.1 –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É
```nginx
# –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx –¥–ª—è Telegram Web App
server {
    listen 443 ssl http2;
    server_name your-domain.com;
    
    # SSL –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
    ssl_certificate /etc/letsencrypt/live/your-domain.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/your-domain.com/privkey.pem;
    
    # CORS –¥–ª—è Telegram
    add_header Access-Control-Allow-Origin "https://web.telegram.org" always;
    add_header Access-Control-Allow-Methods "GET, POST, OPTIONS" always;
    add_header Access-Control-Allow-Headers "Content-Type, Authorization" always;
    
    # Frontend
    location / {
        root /opt/pax-app/frontend;
        index index.html;
        try_files $uri $uri/ /index.html;
    }
    
    # API
    location /api/ {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

#### 5.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
openssl s_client -connect your-domain.com:443 -servername your-domain.com

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
curl -I https://your-domain.com
```

### –®–∞–≥ 6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PAX Platform

#### 6.1 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env —Ñ–∞–π–ª–∞
```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
nano /opt/pax-app/backend/.env
```

```env
# Telegram –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
TELEGRAM_BOT_TOKEN=your-telegram-bot-token-here
TELEGRAM_BOT_USERNAME=pax_rides_bot

# CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
CORS_ORIGINS=https://your-domain.com,https://web.telegram.org,https://t.me

# Webhook URL
TELEGRAM_WEBHOOK_URL=https://your-domain.com/api/telegram/webhook
```

#### 6.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ webhook
curl -X POST "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/setWebhook" \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://your-domain.com/api/telegram/webhook",
    "allowed_updates": ["message", "callback_query", "inline_query"],
    "drop_pending_updates": true
  }'

# –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook
curl -s "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getWebhookInfo"
```

#### 6.3 –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ backend
sudo systemctl restart pax-backend

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
sudo systemctl status pax-backend
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ Web App
```javascript
// –î–æ–±–∞–≤—å—Ç–µ –≤ index.html –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
console.log('Telegram Web App API:', window.Telegram?.WebApp);
console.log('User:', window.Telegram?.WebApp?.initDataUnsafe?.user);
console.log('Chat:', window.Telegram?.WebApp?.initDataUnsafe?.chat);
```

### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Telegram Web App
if (window.Telegram && window.Telegram.WebApp) {
    const tg = window.Telegram.WebApp;
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    tg.ready();
    tg.expand();
    
    // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    const user = tg.initDataUnsafe?.user;
    console.log('User ID:', user?.id);
    console.log('Username:', user?.username);
    console.log('First Name:', user?.first_name);
}
```

### –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ API
```bash
# –¢–µ—Å—Ç API endpoints
curl -X POST "https://your-domain.com/api/auth/telegram/verify" \
  -H "Content-Type: application/json" \
  -d '{
    "init_data": "test_data",
    "user": {
      "id": 123456789,
      "first_name": "Test",
      "username": "test_user"
    }
  }'
```

## üîß –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞** - –ø—Ä–∏ –Ω—É–ª–µ–≤–æ–º –±–∞–ª–∞–Ω—Å–µ
- **–ü–æ–∏—Å–∫ –ø–æ–µ–∑–¥–æ–∫** - —Ñ–æ—Ä–º–∞ —Å –ø–æ–ª—è–º–∏ "–æ—Ç–∫—É–¥–∞", "–∫—É–¥–∞", –¥–∞—Ç–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—Ç
- **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞** - —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ–µ–∑–¥–æ–∫ —Å –¥–µ—Ç–∞–ª—è–º–∏
- **–ü—Ä–æ—Ñ–∏–ª—å –≤–æ–¥–∏—Ç–µ–ª—è** - —Ä–µ–π—Ç–∏–Ω–≥, –æ—Ç–∑—ã–≤—ã, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–æ–¥–∏—Ç–µ–ª–µ
- **–°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã** - –≤—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞
- **–í—ã–±–æ—Ä –±–∞–Ω–∫–∞** - –¥–ª—è –°–ë–ü –ø–ª–∞—Ç–µ–∂–µ–π
- **–£—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞** - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è** - –ø–æ—à–∞–≥–æ–≤–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (10 —à–∞–≥–æ–≤)
- **–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** - –±–∞–ª–∞–Ω—Å, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **–ú–æ–∏ –ø–æ–µ–∑–¥–∫–∏** - –∏—Å—Ç–æ—Ä–∏—è –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø–æ–µ–∑–¥–æ–∫

### API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
```javascript
// –û—Å–Ω–æ–≤–Ω—ã–µ API –º–µ—Ç–æ–¥—ã
const api = {
    // –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
    verifyTelegram: (initData) => fetch('/api/auth/telegram/verify', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ init_data: initData })
    }),
    
    // –ü–æ–∏—Å–∫ –ø–æ–µ–∑–¥–æ–∫
    searchRides: (params) => fetch('/api/rides/search', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(params)
    }),
    
    // –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
    bookRide: (rideId) => fetch(`/api/rides/${rideId}/book`, {
        method: 'POST',
        headers: { 'Authorization': `Bearer ${token}` }
    }),
    
    // –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–µ–∑–¥–∫–∏
    createRide: (rideData) => fetch('/api/rides/create', {
        method: 'POST',
        headers: { 'Authorization': `Bearer ${token}` },
        body: JSON.stringify(rideData)
    }),
    
    // –ü–ª–∞—Ç–µ–∂–∏
    processPayment: (amount, method) => fetch('/api/payments/process', {
        method: 'POST',
        headers: { 'Authorization': `Bearer ${token}` },
        body: JSON.stringify({ amount, method })
    }),
    
    // –ü—Ä–æ—Ñ–∏–ª—å
    getProfile: () => fetch('/api/profile', {
        headers: { 'Authorization': `Bearer ${token}` }
    }),
    
    // –ú–æ–∏ –ø–æ–µ–∑–¥–∫–∏
    getMyRides: () => fetch('/api/rides/my', {
        headers: { 'Authorization': `Bearer ${token}` }
    })
};
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö Telegram
```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ –¥–∞–Ω–Ω—ã—Ö –æ—Ç Telegram
function validateTelegramData(initData, botToken) {
    const data = new URLSearchParams(initData);
    const hash = data.get('hash');
    data.delete('hash');
    
    // –°–æ–∑–¥–∞–Ω–∏–µ HMAC
    const secret = crypto.createHmac('sha256', 'WebAppData').update(botToken).digest();
    const checkString = Array.from(data.entries())
        .sort(([a], [b]) => a.localeCompare(b))
        .map(([key, value]) => `${key}=${value}`)
        .join('\n');
    
    const hmac = crypto.createHmac('sha256', secret).update(checkString).digest('hex');
    
    return hmac === hash;
}
```

### –ó–∞—â–∏—Ç–∞ –æ—Ç CSRF
```javascript
// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ CSRF —Ç–æ–∫–µ–Ω–∞ –∫ –∑–∞–ø—Ä–æ—Å–∞–º
function addCSRFToken(headers) {
    const token = document.querySelector('meta[name="csrf-token"]')?.content;
    if (token) {
        headers['X-CSRF-Token'] = token;
    }
    return headers;
}
```

### –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
```javascript
// –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞
function sanitizeInput(input) {
    return input.replace(/[<>]/g, '');
}
```

## üì± –°–ø–µ—Ü–∏—Ñ–∏–∫–∞ Telegram Web App

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
```javascript
// –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
document.addEventListener('DOMContentLoaded', function() {
    if (window.Telegram && window.Telegram.WebApp) {
        const tg = window.Telegram.WebApp;
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        tg.ready();
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ–º—ã
        tg.setHeaderColor('#2481cc');
        tg.setBackgroundColor('#ffffff');
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        const user = tg.initDataUnsafe?.user;
        if (user) {
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
            handleTelegramAuth(user);
        }
    }
});
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π
```javascript
// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π Telegram Web App
window.Telegram.WebApp.onEvent('mainButtonClicked', function() {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
    handleMainButtonClick();
});

window.Telegram.WebApp.onEvent('backButtonClicked', function() {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥"
    handleBackButtonClick();
});

window.Telegram.WebApp.onEvent('settingsButtonClicked', function() {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
    handleSettingsClick();
});
```

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```javascript
// –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ Telegram
function sendTelegramNotification(userId, message) {
    fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            chat_id: userId,
            text: message,
            parse_mode: 'HTML'
        })
    });
}
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: Web App –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
openssl s_client -connect your-domain.com:443 -servername your-domain.com

# –ü—Ä–æ–≤–µ—Ä–∫–∞ CORS –Ω–∞—Å—Ç—Ä–æ–µ–∫
curl -H "Origin: https://web.telegram.org" \
  -H "Access-Control-Request-Method: POST" \
  -H "Access-Control-Request-Headers: Content-Type" \
  -X OPTIONS https://your-domain.com/api/auth/telegram/verify
```

### –ü—Ä–æ–±–ª–µ–º–∞: Webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook
curl -s "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getWebhookInfo"

# –£–¥–∞–ª–µ–Ω–∏–µ webhook
curl -X POST "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/deleteWebhook"

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ webhook –∑–∞–Ω–æ–≤–æ
curl -X POST "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/setWebhook" \
  -H "Content-Type: application/json" \
  -d '{"url": "https://your-domain.com/api/telegram/webhook"}'
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```javascript
// –û—Ç–ª–∞–¥–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
console.log('Init Data:', window.Telegram?.WebApp?.initData);
console.log('User:', window.Telegram?.WebApp?.initDataUnsafe?.user);
console.log('Chat:', window.Telegram?.WebApp?.initDataUnsafe?.chat);
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### –ú–µ—Ç—Ä–∏–∫–∏ –±–æ—Ç–∞
```javascript
// –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
function trackEvent(event, data) {
    // –û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ—Ç—Ä–∏–∫ –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫—É
    fetch('/api/analytics/track', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ event, data, platform: 'telegram' })
    });
}

// –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
trackEvent('app_opened', { source: 'telegram' });
trackEvent('ride_searched', { from: 'Moscow', to: 'Saint Petersburg' });
trackEvent('ride_booked', { ride_id: 123, price: 1500 });
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```javascript
// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
function logTelegramEvent(event, data) {
    console.log(`[Telegram] ${event}:`, data);
    
    // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ –ª–æ–≥–∏
    fetch('/api/logs/telegram', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ event, data, timestamp: Date.now() })
    });
}
```

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å
- [ ] –ë–æ—Ç —Å–æ–∑–¥–∞–Ω —á–µ—Ä–µ–∑ @BotFather
- [ ] Web App –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] Webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è web.telegram.org
- [ ] API endpoints —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å
- [ ] –ü–æ–∏—Å–∫ –ø–æ–µ–∑–¥–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ß–∞—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü–ª–∞—Ç–µ–∂–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ü—Ä–æ—Ñ–∏–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö Telegram
- [ ] CSRF –∑–∞—â–∏—Ç–∞
- [ ] –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –≤–≤–æ–¥–∞
- [ ] Rate limiting
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏
- [Telegram Bot API Documentation](https://core.telegram.org/bots/api)
- [Telegram Web App Documentation](https://core.telegram.org/bots/webapps)
- [BotFather Commands](https://core.telegram.org/bots#botfather-commands)

### –ö–æ–Ω—Ç–∞–∫—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- üìß **Email**: support@pax-platform.com
- üì± **Telegram**: @pax_support_bot
- üìö **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: [docs.pax-platform.com](https://docs.pax-platform.com)

---

**Telegram –±–æ—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâ**

PAX Platform –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å Telegram –∏ –≥–æ—Ç–æ–≤–∞ –¥–ª—è –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.